<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <title>MOVE ON | المنتج</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    .thumbs {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .thumbs img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .thumbs img:hover {
      border-color: #f5c400;
    }

    .colors .color {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .colors .active {
      border-color: #f5c400;
    }
  </style>
</head>

<body class="page">

<header>
  <div class="logo"><span>MOVE</span><b>ON</b></div>
  <nav>
    <a href="index.html">الرئيسية</a>
    <a href="shop.html">المتجر</a>
    <a href="cart.html">السلة</a>
  </nav>
</header>

<section class="section product-page">

  <div class="product-image">
    <img id="productImage">
    <div id="thumbnails" class="thumbs"></div>
  </div>

  <div class="product-details">
    <h1 id="productName"></h1>
    <p class="price" id="productPrice"></p>
    <p class="desc" id="productDesc"></p>

    <div class="option">
      <label>المقاس</label>
      <select id="size">
        <option value="">اختر المقاس</option>
        <option>S</option>
        <option>M</option>
        <option>L</option>
        <option>XL</option>
      </select>
    </div>

    <div class="option">
      <label>اللون</label>
      <div class="colors" id="colorsBox"></div>
    </div>

    <div class="option">
      <label>العدد</label>
      <input type="number" id="qty" value="1" min="1">
    </div>

    <button class="btn" onclick="addToCart()">أضف إلى السلة</button>
  </div>

</section>

<footer>© 2025 MOVE ON</footer>

<script>
/* ===============================
   قاعدة بيانات المنتجات
================================ */
const products = {
  tshirt: {
    name: "تيشيرت MOVE ON",
    price: 450,
    desc: "خامة تقيلة، قصة ستريت، وهوية واضحة.",
    colors: {
      "أسود": {
        hex: "#000",
        images: [
          "assets/images/tshirt/black-1.jpg",
          "assets/images/tshirt/black-2.jpg"
        ],
        stock: { S: 5, M: 3, L: 0, XL: 2 }
      },
      "أبيض": {
        hex: "#fff",
        images: [
          "assets/images/tshirt/white-1.jpg",
          "assets/images/tshirt/white-2.jpg"
        ],
        stock: { S: 2, M: 4, L: 6, XL: 1 }
      }
    }
  },

  hoodie: {
    name: "هودي MOVE ON",
    price: 750,
    desc: "هودي شتوي تقيل – مريح وعملي.",
    colors: {
      "أسود": {
        hex: "#000",
        images: [
          "assets/images/hoodie/black-1.jpg",
          "assets/images/hoodie/black-2.jpg"
        ],
        stock: { S: 2, M: 4, L: 3, XL: 1 }
      }
    }
  }
};

/* ===============================
   تحميل المنتج
================================ */
const params = new URLSearchParams(window.location.search);
const productId = params.get("id");
const product = products[productId];

if (!product) {
  alert("المنتج غير موجود");
  location.href = "shop.html";
}

document.getElementById("productName").textContent = product.name;
document.getElementById("productPrice").textContent = product.price + " جنيه";
document.getElementById("productDesc").textContent = product.desc;

const imageBox = document.getElementById("productImage");
const thumbsBox = document.getElementById("thumbnails");
const colorsBox = document.getElementById("colorsBox");
const sizeSelect = document.getElementById("size");
const qtyInput = document.getElementById("qty");

let selectedColor = "";
let selectedSize = "";

/* ===============================
   الألوان
================================ */
Object.keys(product.colors).forEach(color => {
  const div = document.createElement("div");
  div.className = "color";
  div.style.background = product.colors[color].hex;

  div.onclick = () => {
    document.querySelectorAll(".color").forEach(c => c.classList.remove("active"));
    div.classList.add("active");

    selectedColor = color;
    loadImages(color);
    updateSizes();
  };

  colorsBox.appendChild(div);
});

/* ===============================
   الصور
================================ */
function loadImages(color) {
  const imgs = product.colors[color].images;
  imageBox.src = imgs[0];
  thumbsBox.innerHTML = "";

  imgs.forEach(img => {
    const t = document.createElement("img");
    t.src = img;
    t.onclick = () => imageBox.src = img;
    thumbsBox.appendChild(t);
  });
}

/* ===============================
   المقاسات
================================ */
function updateSizes() {
  sizeSelect.value = "";
  selectedSize = "";

  Array.from(sizeSelect.options).forEach(o => {
    if (!o.value) return;
    const available = product.colors[selectedColor].stock[o.value];
    o.disabled = available <= 0;
  });

  qtyInput.value = 1;
}

sizeSelect.onchange = () => {
  selectedSize = sizeSelect.value;
  qtyInput.max = product.colors[selectedColor].stock[selectedSize];
};

/* ===============================
   إضافة للسلة
================================ */
function addToCart() {
  if (!selectedColor || !selectedSize) {
    alert("اختار اللون والمقاس");
    return;
  }

  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push({
    id: productId,
    name: product.name,
    price: product.price,
    color: selectedColor,
    size: selectedSize,
    qty: Number(qtyInput.value)
  });

  localStorage.setItem("cart", JSON.stringify(cart));
  location.href = "cart.html";
}
</script>

</body>
</html>
